webpackJsonp([1],{"+skl":function(e,t){},De1i:function(e,t){},Kx3C:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},r,!1,function(e){a("Kx3C")},null,null).exports,o=a("/ocq"),i=a("Dd8w"),l=a.n(i),p=a("NYxO"),c={name:"Index",data:function(){return{list:[{title:"入学申请书",template:"this is a iamge",desc:"",type:"approvalForSchool",index:0},{title:"外来务工人员和流动人口随迁子女就学联系函",template:"this is a iamge",desc:"",type:"contact",index:1},{title:"户口本",template:"this is a iamge",desc:"",type:"domicile",index:2},{title:"居住证明",template:"this is a iamge",desc:"",type:"residencePermit",index:3},{title:"劳务证明",template:"this is a iamge",desc:"",type:"labour",index:4},{title:"疫苗接种证",template:"this is a iamge",desc:"",type:"vaccinationCertificate",index:5}],uploadList:[],fileId:"",visible:!1,currentIndex:0,currentList:[]}},computed:l()({},Object(p.c)({approvalStore:function(e){return e.approval.approvalStore}})),methods:l()({},Object(p.b)(["init","update"]),{handleClick:function(e){this.currentIndex=e},handleSuccess:function(e,t){var a=this.uploadList[this.currentIndex];a?(a.push(t),s.default.set(this.uploadList,this.currentIndex,a)):s.default.set(this.uploadList,this.currentIndex,new Array(t)),console.log(this.uploadList)},handleView:function(e){this.fileId=e,this.visible=!0},handleFormatError:function(e){this.$Notice.warning({title:"文件类型错误",desc:"文件： "+e.name+" 上传失败！请上传图片格式的文件"})},handleRemove:function(e,t){var a=this;this.$axios.delete("/api/file/delete/"+t.response.data).then(function(r){var n=a.uploadList[e];n.splice(n.indexOf(t),1),s.default.set(a.uploadList,e,n)})},handelSubmit:function(){var e=this;this.$axios.post("/api/updateApproval/"+this.approvalStore.bizId).then(function(t){e.$router.push({name:"Result",params:{bizId:e.approvalStore.bizId}})})}}),created:function(){var e=this;this.$axios.get("/api/createApproval").then(function(t){e.init(t.data),0!==t.data.status&&e.$router.push({name:"Error",params:{bizId:t.data.bizId}})})},mounted:function(){}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"i-card"},[a("h3",[e._v("流动人口及外来务工人员随迁子女就读申请")]),e._v(" "),e._l(e.list,function(t,s){return[a("Row",{key:s,staticClass:"i-card-item-i-row"},[a("Col",[a("Card",{staticClass:"i-card-item"},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._v(" "),a("Row",[a("Col",{staticClass:"i-card-item-lable",attrs:{span:"12"}},[e._v("材料模板：")]),e._v(" "),a("Col",{attrs:{span:"12"}},[e._v(e._s(t.template))])],1),e._v(" "),a("Row",[a("Col",{staticClass:"i-card-item-lable",attrs:{span:"12"}},[e._v("材料说明：")]),e._v(" "),a("Col",{attrs:{span:"12"}},[e._v(e._s(t.desc))])],1),e._v(" "),a("Row",[a("Col",e._l(e.uploadList[s],function(t,r){return a("div",{key:s+"_"+r,staticClass:"upload-list"},["finished"===t.status?[a("img",{attrs:{src:"/api/file/download/"+t.response.data}}),e._v(" "),a("div",{staticClass:"upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){e.handleView(t.response.data)}}}),e._v(" "),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){e.handleRemove(s,t)}}})],1)]:e._e()],2)}))],1),e._v(" "),a("Row",{staticClass:"i-upload"},[a("Col",[a("Upload",{ref:"upload",refInFor:!0,attrs:{"show-upload-list":!1,multiple:"",data:e.approvalStore,"on-success":e.handleSuccess,"on-format-error":e.handleFormatError,action:"/api/file/upload/"+t.type,format:["jpg","jpeg","png"],"max-size":2048}},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"},nativeOn:{click:function(t){e.handleClick(s)}}},[e._v("上传")])],1)],1)],1)],1)],1)],1)]}),e._v(" "),a("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:"/api/file/download/"+e.fileId}}):e._e()]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.handelSubmit}},[e._v("提交")])],2)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("gKub")},"data-v-3575e953",null).exports,m={name:"Result",props:["bizId"],computed:l()({},Object(p.c)({approvalStore:function(e){return e.approval.approvalStore}}))},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-wrapper"},[a("Card",[a("p",{attrs:{solt:"title"}},[e._v("审核结果")]),e._v(" "),2===e.approvalStore.status?a("p",[e._v("恭喜您，你通过了审核，请凭"+e._s(e.approvalStore.accessCode)+"认证码办理入学！")]):3===e.approvalStore.status?a("p",[e._v("很遗憾，您的信息因为"+e._s(e.approvalStore.comment)+"而未通过审核！")]):a("p",[e._v("您的信息正在审核中，请耐心等待")])])],1)},staticRenderFns:[]},v=a("VU/8")(m,f,!1,null,null,null).exports,h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-wrapper"},[t("p",[this._v("您提交的申请正在审核，请勿重复提交，您可以点击以下链接查询结果"),t("router-link",{attrs:{to:{name:"Result",params:{bizId:this.bizId}}}},[this._v(this._s(this.bizId))])],1)])},staticRenderFns:[]};var g=a("VU/8")({name:"Error",props:["bizId"]},h,!1,function(e){a("De1i")},"data-v-69786818",null).exports;s.default.use(o.a);var b=new o.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"Index",component:d},{path:"/error/:bizId",name:"Error",component:g,props:!0},{path:"/result/:bizId",name:"Result",component:v,props:!0}]}),_=a("BTaQ"),C=a.n(_),k=(a("+skl"),{state:{approvalStore:{}},mutations:{update:function(e,t){e.approvalStore=t}},actions:{init:function(e,t){(0,e.commit)("update",t)},update:function(e,t){(0,e.commit)("update",t)}}});s.default.use(p.a);var w=new p.a.Store({modules:{approval:k}}),y=a("//Fk"),x=a.n(y),I=a("mtWM"),S=a.n(I),R=a("mw3O"),z=a.n(R),j=this;S.a.default.baseURL="",S.a.defaults.transformRequest=[function(e){return z.a.stringify(e)}];var O=S.a.CancelToken,F={};S.a.interceptors.request.use(function(e){var t=e.url+z.a.stringify(e.params)+z.a.stringify(e.data);return F[t]?(F[t]("cancle the request by user, because of it is repeated!"),delete F[t]):e.cancelToken=new O(function(e){F[t]=e}),e},function(e){return console.error(e.data.message),x.a.reject(e.data.message)}),S.a.interceptors.response.use(function(e){return"Success"!==e.data.code?x.a.reject(e):e.data},function(e){if(e&&e.response)switch(e.response.status){case 400:e.response.data.message="错误请求";break;case 401:e.response.data.message="未授权，请重新登录";break;case 403:e.response.data.message="拒绝访问";break;case 404:e.response.data.message="请求错误,未找到该资源";break;case 405:e.response.data.message="请求方法未允许";break;case 408:e.response.data.message="请求超时";break;case 500:e.response.data.message="服务器端出错";break;case 501:e.response.data.message="网络未实现";break;case 502:e.response.data.message="网络错误";break;case 503:e.response.data.message="服务不可用";break;case 504:e.response.data.message="网络超时";break;case 505:e.response.data.message="http版本不支持该请求";break;default:e.response.data.message="连接错误"+e.response.status}else e.response.data.message="连接到服务器失败";return x.a.resolve(e.response)});var $=function(e){return new x.a(function(t,a){S()({method:e.method||"get",url:e.url,params:e.params,headers:{"Content-Type":e.contentType||"application/x-www-form-urlencoded"},onUploadProgress:function(t){"[object Function]"===Object.prototype.toString.call(e.uploadProgressCallBack)&&e.uploadProgressCallBack.apply(j,t)},onDownloadProgress:function(t){"[object Function]"===Object.prototype.toString.call(e.DownloadProgressCallBack)&&e.DownloadProgressCallBack.apply(j,t)}}).then(function(e){t(e)}).catch(function(e){S.a.isCancel(e)?console.log("Request canceled",e.data.message):console.error("Request errored",e.data.message)})})},L={get:function(e,t){return $({url:e,params:t,method:"get"})},post:function(e,t){return $({url:e,params:t,method:"post"})},put:function(e,t){return $({url:e,params:t,method:"put"})},delete:function(e,t){return $({url:e,params:t,method:"delete"})},upload:function(e,t,a){return $({url:e,params:t,method:"post",uploadProgressCallBack:a,contentType:"multipart/form-data"})}};s.default.prototype.$axios=L,s.default.config.productionTip=!1,s.default.use(C.a),new s.default({el:"#app",router:b,store:w,components:{App:n},template:"<App/>"})},gKub:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5ac49436d4f98cdbc49b.js.map